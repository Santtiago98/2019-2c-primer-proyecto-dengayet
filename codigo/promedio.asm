/*
 * tarea.asm
 *
 *  Created: 9/26/2019 8:03:43 PM
 *   Author: denise
 */ 
 .EQU SIZE=8

	.DSEG
	.ORG 0x100
 V: .BYTE SIZE
 M: .BYTE 1

	.CSEG
	DATA: .DB "hola mundo",0
	LDI ZL,LOW(2*DATA)
	LDI ZH,HIGH(2*DATA)
	JMP MAIN
	.ORG INT_VECTORS_SIZE
MAIN: 
	RCALL CARGAR_VECTOR
	LDI XH, HIGH(V)
	LDI XL, LOW(V)
	LDI R16,0
	LDI R17,0
	LDI R18,SIZE 
	CALL PROMEDIO
	HERE: RJMP HERE

PROMEDIO:
SUM:	
	LD R19,X+
	ADD R16,R19
	CLR R20  
	ADC R17,R20
	DEC R18
	BRNE SUM
	CALL DIV_8
	RET
	
DIV_8:
	ASR R17 
	ROR R16 
	ASR R17
	ROR R16
	ASR R17
	ROR R16	
	RET

CARGAR_VECTOR:
	LDI R18, SIZE
	LDI XL,LOW(V)
	LDI XH,HIGH(V)
LOOP:
	LPM R25,Z+
	ST X+,R25
	DEC R18
	BRNE LOOP
	RET